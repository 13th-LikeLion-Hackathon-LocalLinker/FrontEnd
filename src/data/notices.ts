// //  타입 + 매핑

export type Notice = {
  id: string;
  category: string; // 한글 라벨(교육, 의료 등)
  type: string; // tags 한글 + (조건부) '기간제'
  title: string;
  dept: string;
  period: string;
  isNew?: boolean;
  isDueSoon?: boolean;
  isPeriodLimited?: boolean;
};

// ==== 백엔드 응답 타입 & 매핑 유틸(①) ====
export type BackendNotice = {
  id: number;
  title: string;
  category:
    | 'ADMINSTRATION'
    | 'MEDICAL'
    | 'HOUSING'
    | 'EMPLOYMENT'
    | 'EDUCATION'
    | 'LIFE_SUPPORT';
  organization: string | null;
  sourceUrl: string | null;
  applyStartAt: string | null;
  applyEndAt: string | null;
  eligibility: string | null;
  tags: 'BENEFIT' | 'SYSTEM' | 'PROGRAM' | null;
  isPeriodLimited: boolean;
};

const CATEGORY_KO: Record<string, string> = {
  ADMINSTRATION: '행정',
  MEDICAL: '의료',
  HOUSING: '주거',
  EMPLOYMENT: '취업/근로',
  EDUCATION: '교육',
  LIFE_SUPPORT: '생활 지원',
};

const TAG_KO: Record<'BENEFIT' | 'SYSTEM' | 'PROGRAM', string> = {
  BENEFIT: '혜택',
  SYSTEM: '제도',
  PROGRAM: '프로그램',
};

// YY.MM.DD 포맷
function fmtDate(iso: string): string {
  const d = new Date(iso); // ISO가 로컬로 파싱
  const yy = String(d.getFullYear() % 100).padStart(2, '0');
  const mm = String(d.getMonth() + 1).padStart(2, '0');
  const dd = String(d.getDate()).padStart(2, '0');
  return `${yy}.${mm}.${dd}`;
}

function buildPeriod(start: string | null, end: string | null): string {
  if (!start && !end) return '상시';
  if (start && end) return `${fmtDate(start)}~${fmtDate(end)}`;
  if (start && !end) return `${fmtDate(start)}~미정`;
  return `미정~${fmtDate(end!)}`;
}

export function mapBackendToNotice(dto: BackendNotice): Notice {
  const categoryKo = CATEGORY_KO[dto.category] ?? dto.category;
  const tagKo = dto.tags ? TAG_KO[dto.tags] : '';

  return {
    id: String(dto.id),
    category: categoryKo,
    type: tagKo,
    title: dto.title,
    dept: dto.eligibility ?? '',
    period: buildPeriod(dto.applyStartAt, dto.applyEndAt),
    isNew: false,
    isDueSoon: false,
    isPeriodLimited: !!dto.isPeriodLimited,
  };
}

export function mapBackendList(list: BackendNotice[]): Notice[] {
  return list.map(mapBackendToNotice);
}
// data/notices.ts 내
export const MOCK_BACKEND_LATEST: BackendNotice[] = [
  // ===== EDUCATION =====
  {
    id: 1,
    title: '국내 장기체류 아동 교육권 보장 방안',
    category: 'EDUCATION',
    organization: '교육부',
    sourceUrl:
      'https://www.moe.go.kr/boardCnts/viewRenew.do?boardID=294&boardSeq=95184',
    applyStartAt: '2025-04-01T09:00:00',
    applyEndAt: '2028-03-31T18:00:00',
    eligibility: '아동(7세~18세)',
    tags: 'SYSTEM',
    isPeriodLimited: true,
  },
  {
    id: 2,
    title: '대학 신입생 학자금 지원 안내',
    category: 'EDUCATION',
    organization: '한국장학재단',
    sourceUrl: 'https://www.kosaf.go.kr/',
    applyStartAt: '2025-07-15T09:00:00',
    applyEndAt: '2025-09-15T18:00:00',
    eligibility: '대학 신입생',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 3,
    title: '다문화 가정 방과후 학습 프로그램',
    category: 'EDUCATION',
    organization: '교육청',
    sourceUrl: 'https://www.moe.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '초·중·고 재학생',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },
  {
    id: 4,
    title: '학자금 대출 상환 유예 안내',
    category: 'EDUCATION',
    organization: '한국장학재단',
    sourceUrl: 'https://www.kosaf.go.kr/',
    applyStartAt: '2025-08-25T09:00:00',
    applyEndAt: '2025-09-05T18:00:00',
    eligibility: '대학생 및 졸업 후 3년 이내',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 5,
    title: '한국어 집중과정(가을학기) 수강생 모집',
    category: 'EDUCATION',
    organization: '국립국제교육원',
    sourceUrl: 'https://www.niied.go.kr/',
    applyStartAt: '2025-08-10T09:00:00',
    applyEndAt: '2025-09-01T18:00:00',
    eligibility: '국내 거주 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },

  // ===== EMPLOYMENT =====
  {
    id: 6,
    title: '청년 창업 지원 사업 모집',
    category: 'EMPLOYMENT',
    organization: '중소벤처기업부',
    sourceUrl:
      'https://www.mss.go.kr/site/smba/ex/bbs/View.do?cbIdx=86&bcIdx=1234567',
    applyStartAt: '2024-01-15T09:00:00',
    applyEndAt: '2024-02-15T18:00:00',
    eligibility: '만 18세~39세 청년',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 7,
    title: '외국인 근로자 취업상담 주간',
    category: 'EMPLOYMENT',
    organization: '고용노동부',
    sourceUrl: 'https://www.moel.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },
  {
    id: 8,
    title: '청년 인턴십 지원',
    category: 'EMPLOYMENT',
    organization: '고용노동부',
    sourceUrl: 'https://www.moel.go.kr/',
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-08-24T18:00:00',
    eligibility: '만 34세 이하',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 9,
    title: '디지털 역량 교육(클라우드/데이터) 무료과정',
    category: 'EMPLOYMENT',
    organization: '고용정보원',
    sourceUrl: 'https://www.keis.or.kr/',
    applyStartAt: '2025-06-01T09:00:00',
    applyEndAt: '2025-12-31T18:00:00',
    eligibility: '구직자·재직자',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 10,
    title: '중소기업 취업 청년 소득세 감면 안내',
    category: 'EMPLOYMENT',
    organization: '기획재정부',
    sourceUrl: 'https://www.moef.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '중소기업 재직 청년',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },

  // ===== MEDICAL =====
  {
    id: 11,
    title: '저소득층 의료비 지원 프로그램',
    category: 'MEDICAL',
    organization: '보건복지부',
    sourceUrl:
      'https://www.mohw.go.kr/react/policy/index.jsp?PAR_MENU_ID=06&MENU_ID=06350101',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '기준중위소득 50% 이하',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },
  {
    id: 12,
    title: '재난 의료비 한시 지원',
    category: 'MEDICAL',
    organization: '보건복지부',
    sourceUrl: 'https://www.mohw.go.kr/',
    applyStartAt: null,
    applyEndAt: '2025-12-31T23:59:59',
    eligibility: '재난지역 거주자',
    tags: 'SYSTEM',
    isPeriodLimited: true,
  },
  {
    id: 13,
    title: '건강검진 바우처 제공',
    category: 'MEDICAL',
    organization: '지자체',
    sourceUrl: 'https://www.mohw.go.kr/',
    applyStartAt: '2025-05-01T09:00:00',
    applyEndAt: '2025-10-31T18:00:00',
    eligibility: '취약계층',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 14,
    title: '임산부 산전검사 지원',
    category: 'MEDICAL',
    organization: '보건소',
    sourceUrl: 'https://www.kdca.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '임산부',
    tags: 'BENEFIT',
    isPeriodLimited: false,
  },
  {
    id: 15,
    title: '외국인 무료진료의 날(월 1회)',
    category: 'MEDICAL',
    organization: '자원봉사단체',
    sourceUrl: null,
    applyStartAt: '2025-01-01T09:00:00',
    applyEndAt: '2025-12-31T18:00:00',
    eligibility: '의료사각지대 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },

  // ===== HOUSING =====
  {
    id: 16,
    title: '신혼부부 임대주택 입주자 모집',
    category: 'HOUSING',
    organization: 'LH 한국토지주택공사',
    sourceUrl: 'https://www.lh.or.kr/contents/cont.do?sMenuId=LH_030202',
    applyStartAt: '2025-09-10T10:00:00',
    applyEndAt: '2025-09-25T17:00:00',
    eligibility: '혼인 7년 이내 신혼부부',
    tags: null,
    isPeriodLimited: true,
  },
  {
    id: 17,
    title: '공공임대주택 추가 모집',
    category: 'HOUSING',
    organization: 'LH',
    sourceUrl: 'https://www.lh.or.kr/',
    applyStartAt: '2025-08-23T09:00:00',
    applyEndAt: '2025-08-28T18:00:00',
    eligibility: '무주택자',
    tags: 'SYSTEM',
    isPeriodLimited: true,
  },
  {
    id: 18,
    title: '전월세 보증금 대출 이자 지원',
    category: 'HOUSING',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-07-01T09:00:00',
    applyEndAt: '2025-08-31T18:00:00',
    eligibility: '청년·신혼부부',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 19,
    title: '주거급여 안내',
    category: 'HOUSING',
    organization: '보건복지부',
    sourceUrl: 'https://www.bokjiro.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '저소득 가구',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 20,
    title: '다문화 가정 이사비 지원(선착순)',
    category: 'HOUSING',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-10T09:00:00',
    applyEndAt: '2025-08-24T18:00:00',
    eligibility: '다문화 가정',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },

  // ===== LIFE_SUPPORT =====
  {
    id: 21,
    title: '노인 돌봄 제도 개편 안내',
    category: 'LIFE_SUPPORT',
    organization: '보건복지부',
    sourceUrl: 'https://www.mohw.go.kr/react/policy/index.jsp',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '만 65세 이상',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 22,
    title: '에너지 바우처 지원',
    category: 'LIFE_SUPPORT',
    organization: '산업통상자원부',
    sourceUrl: 'https://www.energy.or.kr/',
    applyStartAt: '2025-10-01T09:00:00',
    applyEndAt: '2026-02-28T18:00:00',
    eligibility: '취약계층',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 23,
    title: '다문화가족 통번역 서비스',
    category: 'LIFE_SUPPORT',
    organization: '여성가족부',
    sourceUrl: 'https://www.mogef.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '다문화가족',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },
  {
    id: 24,
    title: '재난긴급생활비(추가 접수)',
    category: 'LIFE_SUPPORT',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-20T09:00:00',
    applyEndAt: '2025-09-10T18:00:00',
    eligibility: '재난피해 가구',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 25,
    title: '출산 가정용 육아용품 대여',
    category: 'LIFE_SUPPORT',
    organization: '육아종합지원센터',
    sourceUrl: null,
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '영유아 자녀 가정',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },

  // ===== ADMINSTRATION (행정) =====
  {
    id: 26,
    title: '외국인 등록 및 체류 관련 행정 서비스',
    category: 'ADMINSTRATION',
    organization: '법무부 출입국·외국인정책본부',
    sourceUrl: 'https://www.immigration.go.kr/immigration/1569/subview.do',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: null,
    isPeriodLimited: false,
  },
  {
    id: 27,
    title: '전자민원 신청 교육(온라인)',
    category: 'ADMINSTRATION',
    organization: '정부24',
    sourceUrl: 'https://www.gov.kr/',
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-12-31T18:00:00',
    eligibility: '대한민국 국민 및 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 28,
    title: '외국인 대상 생활법령 안내',
    category: 'ADMINSTRATION',
    organization: '법제처',
    sourceUrl: 'https://www.moleg.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 29,
    title: '전자서명 인증서 발급 수수료 감면',
    category: 'ADMINSTRATION',
    organization: '행정안전부',
    sourceUrl: 'https://www.mois.go.kr/',
    applyStartAt: '2025-07-01T09:00:00',
    applyEndAt: '2025-09-30T18:00:00',
    eligibility: '취약계층',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 30,
    title: '외국인 생활가이드 북(다국어) 배포',
    category: 'ADMINSTRATION',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },

  // ===== 추가 케이스(정렬/임박 테스트용) =====
  {
    id: 31,
    title: '단기 직업훈련(9월 기수) 모집',
    category: 'EMPLOYMENT',
    organization: '고용노동부',
    sourceUrl: 'https://www.moel.go.kr/',
    applyStartAt: '2025-08-20T09:00:00',
    applyEndAt: '2025-08-26T18:00:00',
    eligibility: '구직자',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 32,
    title: '장애인 보조기기 급여 지원',
    category: 'MEDICAL',
    organization: '보건복지부',
    sourceUrl: 'https://www.mohw.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '등록 장애인',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 33,
    title: '다문화가정 한국문화 체험',
    category: 'LIFE_SUPPORT',
    organization: '여성가족부',
    sourceUrl: 'https://www.mogef.go.kr/',
    applyStartAt: '2025-08-05T09:00:00',
    applyEndAt: '2025-09-05T18:00:00',
    eligibility: '다문화가정',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 34,
    title: '공공도서관 다국어 도서 대출 확대',
    category: 'EDUCATION',
    organization: '문화체육관광부',
    sourceUrl: 'https://www.mcst.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국민 누구나',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 35,
    title: '주거 취약계층 냉·난방기 지원',
    category: 'HOUSING',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-06-15T09:00:00',
    applyEndAt: '2025-08-31T18:00:00',
    eligibility: '취약계층',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 36,
    title: '비대면 민원접수 챗봇 시범 운영',
    category: 'ADMINSTRATION',
    organization: '행정안전부',
    sourceUrl: 'https://www.mois.go.kr/',
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-10-01T18:00:00',
    eligibility: '대한민국 국민 및 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 37,
    title: '난임 시술비 지원 확대',
    category: 'MEDICAL',
    organization: '보건복지부',
    sourceUrl: 'https://www.mohw.go.kr/',
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-12-31T18:00:00',
    eligibility: '난임 부부',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 38,
    title: '다국어 생활안내 콜센터 운영',
    category: 'LIFE_SUPPORT',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: false,
  },
  {
    id: 39,
    title: '공공근로(가을) 참여자 모집',
    category: 'EMPLOYMENT',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-18T09:00:00',
    applyEndAt: '2025-08-30T18:00:00',
    eligibility: '만 18세 이상',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 40,
    title: '다문화 자녀 문화예술 캠프',
    category: 'EDUCATION',
    organization: '문화체육관광부',
    sourceUrl: 'https://www.mcst.go.kr/',
    applyStartAt: '2025-08-20T09:00:00',
    applyEndAt: '2025-09-03T18:00:00',
    eligibility: '초·중·고생',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 41,
    title: '긴급 생계비(추경) 접수',
    category: 'LIFE_SUPPORT',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-22T09:00:00',
    applyEndAt: '2025-09-02T18:00:00',
    eligibility: '저소득 가구',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 42,
    title: '공공자전거 무상 대여(시범)',
    category: 'LIFE_SUPPORT',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-09-30T18:00:00',
    eligibility: '지역 주민',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 43,
    title: '청년 전세자금 보증료 지원',
    category: 'HOUSING',
    organization: '국토교통부',
    sourceUrl: 'https://www.molit.go.kr/',
    applyStartAt: '2025-07-10T09:00:00',
    applyEndAt: '2025-10-10T18:00:00',
    eligibility: '청년 무주택자',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 44,
    title: '출입국 온라인 사전예약 안내',
    category: 'ADMINSTRATION',
    organization: '법무부',
    sourceUrl: 'https://www.immigration.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '국내 체류 외국인',
    tags: 'SYSTEM',
    isPeriodLimited: false,
  },
  {
    id: 45,
    title: '예방접종 비용 지원(아동)',
    category: 'MEDICAL',
    organization: '질병관리청',
    sourceUrl: 'https://www.kdca.go.kr/',
    applyStartAt: null,
    applyEndAt: null,
    eligibility: '만 12세 이하',
    tags: 'BENEFIT',
    isPeriodLimited: false,
  },
  {
    id: 46,
    title: '한부모가족 양육비 지원 확대',
    category: 'LIFE_SUPPORT',
    organization: '보건복지부',
    sourceUrl: 'https://www.mohw.go.kr/',
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2026-12-31T18:00:00',
    eligibility: '한부모가정',
    tags: 'SYSTEM',
    isPeriodLimited: true,
  },
  {
    id: 47,
    title: '공공기관 체험형 인턴(하반기) 모집',
    category: 'EMPLOYMENT',
    organization: '공공기관',
    sourceUrl: null,
    applyStartAt: '2025-08-15T09:00:00',
    applyEndAt: '2025-09-01T18:00:00',
    eligibility: '대학생·졸업생',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 48,
    title: '대학생 기숙사비 지원',
    category: 'EDUCATION',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-05T09:00:00',
    applyEndAt: '2025-08-29T18:00:00',
    eligibility: '관내 대학생',
    tags: 'BENEFIT',
    isPeriodLimited: true,
  },
  {
    id: 49,
    title: '공공 데이터 활용 경진대회',
    category: 'EDUCATION',
    organization: '행정안전부',
    sourceUrl: 'https://www.data.go.kr/',
    applyStartAt: '2025-06-01T09:00:00',
    applyEndAt: '2025-09-20T18:00:00',
    eligibility: '학생·일반',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
  {
    id: 50,
    title: '외국인 생활정보 앱 개선 의견 접수',
    category: 'ADMINSTRATION',
    organization: '지자체',
    sourceUrl: null,
    applyStartAt: '2025-08-01T09:00:00',
    applyEndAt: '2025-08-31T18:00:00',
    eligibility: '국내 체류 외국인',
    tags: 'PROGRAM',
    isPeriodLimited: true,
  },
];
